/**
 * Apple Native View Transitions
 * Professional-tier motion system for spatial continuity
 */

:root {
    --ios-ease: cubic-bezier(0.32, 0.725, 0, 1);
    --ios-duration: 400ms;
}

/* Enable View Transitions for supported browsers */
@supports (view-transition-name: root) {

    /* 1. Root Screen Switch (Tabs) - Smooth Cross Dissolve */
    ::view-transition-old(root) {
        animation: 180ms ease-out both fadeOut;
    }

    ::view-transition-new(root) {
        animation: 250ms ease-in both fadeIn;
    }

    /* 2. Hierarchical Drill-down (Push/Pop) 
       Note: We assign names to content containers in JS if needed, 
       but for this app we use standard Push animations on the children. */
}

/* Push Animation (Drill In) */
@keyframes iosPushEnter {
    from {
        transform: translateX(100%);
    }

    to {
        transform: translateX(0);
    }
}

@keyframes iosPushExit {
    from {
        opacity: 1;
        transform: translateX(0);
    }

    to {
        opacity: 0.5;
        transform: translateX(-25%);
        /* Parallax slide out */
    }
}

/* Pop Animation (Drill Out) */
@keyframes iosPopEnter {
    from {
        opacity: 0.5;
        transform: translateX(-25%);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes iosPopExit {
    from {
        transform: translateX(0);
    }

    to {
        transform: translateX(100%);
    }
}

/* Global Transition Classes for Navigation.js */
.animate-enter-push {
    animation: iosPushEnter var(--ios-duration) var(--ios-ease) both;
    will-change: transform;
}

.animate-enter-pop {
    animation: iosPopEnter var(--ios-duration) var(--ios-ease) both;
    will-change: transform;
}

/* Standard Fade */
@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }

    to {
        opacity: 0;
    }
}

/* Accessibility: Support users who prefer no motion */
@media (prefers-reduced-motion: reduce) {

    *,
    ::view-transition-group(*),
    ::view-transition-old(*),
    ::view-transition-new(*) {
        animation: none !important;
        transition: none !important;
    }
}

/* Performance optimizations */
.screen {
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    transform: translateZ(0);
}