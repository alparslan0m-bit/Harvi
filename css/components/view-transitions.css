/**
 * View Transitions API Styles
 * Smooth directional transitions between screens and navigation
 * Tuned for Apple-like "retargeting" physics
 */

:root {
    --ios-ease: var(--motion-ease-out, cubic-bezier(0.32, 0.725, 0, 1));
    --ios-duration: var(--duration-normal, 350ms);
}

/* Enable View Transitions for supported browsers */
@supports (view-transition-name: root) {
    ::view-transition-group(root) {
        animation-duration: var(--ios-duration);
        animation-timing-function: var(--ios-ease);
    }

    ::view-transition-old(root) {
        animation: fadeOut 0.2s ease-out;
        /* Main screens just fade */
        mix-blend-mode: normal;
    }

    ::view-transition-new(root) {
        animation: fadeIn 0.3s ease-in;
        mix-blend-mode: normal;
    }
}

/* Screen Transitions */
.screen {
    view-transition-name: screen-content;
}

/* 
   Overrides for specific transitions if we could detect them.
   For now, we default to a high-quality Cross Dissolve for Tabs,
   which is standard iOS behavior for Tab Bars.
*/

/* Directional slide animations (For manual use in JS) */
@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(40px);
        /* Subtle parallax offset */
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes slideOutLeft {
    from {
        opacity: 1;
        transform: translateX(0);
    }

    to {
        opacity: 0;
        transform: translateX(-10px);
        /* Slower exit for parallax feel */
    }
}

@keyframes slideInLeft {
    from {
        opacity: 0;
        transform: translateX(-40px);
    }

    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* Drill-down Enter Animation (Used by Navigation.js) */
.animate-enter-push {
    animation: slideInRight 0.5s var(--ios-ease) forwards;
}

/* Back Navigation Enter Animation */
.animate-enter-pop {
    animation: slideInLeft 0.5s var(--ios-ease) forwards;
}

/* Drill-down Exit Animation */
.animate-exit-push {
    animation: slideOutLeft 0.5s var(--ios-ease) forwards;
}

/* Standard Fade for Tabs */
@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }

    to {
        opacity: 0;
    }
}

/* Slide Up (Modal-like) */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px) scale(0.98);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* Stagger Animations for Lists */
.stagger-appear {
    opacity: 0;
    animation: fadeInUp 0.5s var(--ios-ease) forwards;
}

/* Card Press State */
.card-press-active {
    transform: scale(0.96);
    transition: transform 0.4s var(--ios-ease);
}

/* Quiz Screen Specifics */
.quiz-screen.active {
    /* Ensure it sits on top if we use z-indexing */
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {

    *,
    ::view-transition-group(*),
    ::view-transition-old(*),
    ::view-transition-new(*) {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}